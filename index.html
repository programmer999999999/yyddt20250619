<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>烟雨弹弹堂新人指南</title>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <h1>欢迎来到烟雨弹弹堂！</h1>
        <div class="game-link-container">
            游戏入口：
            <a href="http://202.189.9.83:3321/" class="game-entry" target="_blank">🎮 点击进入游戏</a>
        </div>
    </header>

    <div class="container">
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('guide')">新人指南</button>
            <button class="tab-button recharge-button" onclick="showTab('recharge')">💝 充值配套 💝</button>
            <button class="tab-button" onclick="showTab('zhanling')">战令详情</button>
            <button class="tab-button contact-button" onclick="showTab('contact')">📞 联系我们 📞</button>
            <button class="tab-button" onclick="showTab('zhanlipinzheng')">战力凭证</button>
            <button class="tab-button" onclick="showTab('updates')">更新预告</button>
            <button class="tab-button" onclick="showTab('event')">PVP 最新战况</button>
        </div>

        <div id="guide" class="tab-content active">
            <div class="section">
                <h2>新人指南</h2>
                <ul>
                    <li>🔗手动打开链接：<a href="http://202.189.9.83:3321/" target="_blank">http://202.189.9.83:3321/</a></li>
                    <li>1. 弹弹堂需要 Flash Center：<a href="https://www.flash.cn/" target="_blank">flash.cn</a></li>
                    <li>2. 推荐浏览器：
                        <ul>
                            <li>🍬 糖果浏览器：<a href="http://youxi.tg1234.com/index.html" target="_blank">点击访问</a></li>
                            <li>⚡ Flash 浏览器：<a href="https://browser.flash.cn/" target="_blank">点击访问</a></li>
                            <li>🌐 UC 浏览器：<a href="https://ucbrowser.in/pc/" target="_blank">点击访问</a></li>
                        </ul>
                    </li>
                    <li>3. 马来西亚用户如遇问题，建议使用 VPN：
                        <ul>
                            <li>🦊 Quick Fox 加速器：<a href="https://www.quick-fox.com/en-US" target="_blank">下载加速器</a>
                            </li>
                        </ul>
                    </li>
                    <li>4. 手机 & 电脑远程控制：
                        <ul>
                            <li>🌻 向日葵远控：<a href="https://sunlogin.oray.com/" target="_blank">点击下载</a></li>
                            <li>📱 Puffin 浏览器（手机上玩）：<a href="https://www.puffin.com/" target="_blank">点击了解</a></li>
                        </ul>
                    </li>
                    <li>5. 注册账号后，把昵称发群里找<a href="#" onclick="showNewbieContact(); return false;" class="new-member-benefit-link">新人福利管理</a>领取🎁大礼包哦！</li>
                    <li>🔧白屏黑屏问题，或更新后：<a href="./downloads/clearCache.jpeg" target="_blank">如何清理缓存</a></li>
                    <ul>
                        <li>🗑️ 或直接打开这个链接：<a href="http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager07.html" target="_blank">用什么浏览器玩弹弹堂就用什么浏览器打开</a></li>
                    </ul>
                </ul>
            </div>

            <div class="section">
                <h2>脚本下载</h2>
                <ul>
                    <li>使用电脑打开：<a href="./downloads/script/弹弹堂3私服脚本.exe" download>弹弹堂3私服脚本</a></li>
                    <li>FLASH安装教学：<a href="./downloads/script/scriptHelper2.jpeg" target="_blank">点击观看</a></li>
                    <li>一键全清：<a href="./downloads/script/AdobeFlashPlayer一剑全清.exe" download>点击下载</a></li>
                    <li>ActiveX：<a href="./downloads/script/FlashPlayerActiveX_Final.exe" download>点击下载</a></li>
                    <li>NPAPI：<a href="./downloads/script/FlashPlayerNPAPI_Final.exe" download>点击下载</a></li>
                    <li>PPAPI：<a href="./downloads/script/FlashPlayerPPAPI_Final.exe" download>点击下载</a></li>
                    <li>系统语言设置：<a href="./downloads/script/systemLanguage.jpeg" target="_blank">点击观看</a></li>
                </ul>
            </div>

            <div class="section downloads">
                <h2>新手资料下载</h2>
                <a href="./downloads/系统讲解.pdf" target="_blank">⚙️ 系统讲解</a>
                <a href="./downloads/装扮ID查询及命令说明.pdf" target="_blank">👔 装扮ID查询及命令说明</a>
                <a href="./downloads/(新手必看)副本速通攻略.pdf" target="_blank">📕 (新手必看)副本速通攻略</a>
                <a href="./downloads/(新手必看)新手速通攻略.pdf" target="_blank">📘 (新手必看)新手速通攻略</a>
            </div>
        </div>

        <div id="recharge" class="tab-content">
            <div class="section downloads">
                <div class="recharge-person">
                    <div class="wechat-contact">
                        充值请联系微信：<span class="wechat-id" data-img="./downloads/profile/huWechatQR.jpeg">huyb1021</span>
                    </div>
                    <div class="payment-options">
                        充值付款方式：
                        <span class="scan-qr wechat-pay" data-img="./downloads/profile/huWechatPayQR.jpeg">微信支付</span>
                        <span class="scan-qr alipay" data-img="./downloads/profile/huZfbPayQR.jpeg">支付宝</span>
                    </div>
                    <div class="payment-reminder">
                        (请先私信小胡确认收款人姓名，确保无误后，再进行充值)
                    </div>
                </div>
                <h2>特权卡(新手推荐)</h2>
                <a href="./downloads/特权卡.jpeg" target="_blank">💰 特权卡价格表</a>
            </div>
            <div class="section downloads">
                <h2>连充配套(素材)</h2>
                <a href="./downloads/1.jpeg" target="_blank">💰 连充第一期</a>
                <a href="./downloads/2.jpeg" target="_blank">💰 连充第二期</a>
                <a href="./downloads/3.jpeg" target="_blank">💰 连充第三期</a>
                <a href="./downloads/4.jpeg" target="_blank">💰 连充第四期</a>
                <a href="./downloads/5.jpeg" target="_blank">💰 连充第五期</a>
                <a href="./downloads/6.jpeg" target="_blank">💰 连充第六期</a>
                <a href="./downloads/7.jpeg" target="_blank">💰 连充第七期</a>
            </div>
            <div class="section downloads">
                <h2>累充奖励表</h2>
                <a href="./downloads/累充奖励表.pdf" target="_blank">💰 累充参考奖励表</a>
            </div>
        </div>

        <div id="zhanling" class="tab-content">
            <div class="section downloads">
                <h2>战令价格 (1-50级)</h2>
                <li>初级免费</li>
                <br>
                <li>中级 68RMB</li>
                <br>
                <li>高级 128RMB</li>
                <br>
                <li>中高级打包 188RMB</li>
                <h2>战令奖励</h2>
                <img src="./downloads/zhanling.jpeg" alt="战令图片" style="max-width: 100%; height: auto;" />
            </div>
        </div>

        <div id="updates" class="tab-content">
            <div class="section downloads">
                <h2>更新预告</h2>
                <li>6.16日调整内容：<br>
                    - 噩梦副本天空之城，高级副本川剧变脸掉落添加（夜里完成）；<br>
                    - 新增解绑（详情见精彩活动）；<br>
                    - 完成战令内容更新；</li>
                <br>
                <li>6.14日调整内容：<br>
                    - 更新噩梦副本天空之城，高级副本川剧变脸，掉落15日完成添加；<br>
                    - 新增+5婚戒解绑，碎石解绑</li>
                <br>
                <li>预计6月18号前，完成游戏版本全部更新，调整活动副本掉落及开启新版本充值返等额烟雨币活动至6月20日 (含618期间)</li>
            </div>
        </div>

        <div id="event" class="tab-content">
            <div class="section downloads">
                <h2>烟雨弹弹堂 第二届 PVP (1vs1) 大赛</h2>
                <li>预计6月20日开始比赛</li>
                <br>
                <li>拿到了最新比赛名单 开心病毒 再更新资讯</li>
            </div>
        </div>

        <div id="contact" class="tab-content">
            <div id="contact-owner" class="section">
                <h2>烟雨弹弹堂管理人员</h2>
                <div class="profile-grid">
                    <!-- Contact 1 -->
                    <div class="profile-rectangle">
                        <div class="profile-header">
                            <div class="profile-avatar">
                                <img src="./downloads/profile/xiaohu.jpeg" alt="服主" data-qr="./downloads/profile/huWechatQR.jpeg" class="clickable-avatar">
                            </div>
                            <div class="profile-title">
                                <h3>胡总 (小胡同志)</h3>
                                <div class="profile-tags">
                                    <span class="tag owner">服主</span>
                                    <span class="tag clickable" onclick="showTab('recharge')">充值找他</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">微信</span>
                                <span class="detail-value">huyb1021</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">QQ</span>
                                <span class="detail-value">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Contact 2 -->
                    <div class="profile-rectangle">
                        <div class="profile-header">
                            <div class="contact-group">
                                <div class="profile-avatar">
                                    <img src="./downloads/profile/wcGroup.jpeg" alt="WeChat Group">
                                </div>
                                <div class="profile-title">
                                    <h3>微信群</h3>
                                    <div class="profile-tags">
                                        <span class="tag qr">点击放大</span>
                                    </div>
                                </div>
                            </div>

                            <div class="contact-group">
                                <div class="profile-avatar">
                                    <img src="./downloads/profile/qqGroup.jpeg" alt="QQ Group">
                                </div>
                                <div class="profile-title">
                                    <h3>QQ群</h3>
                                    <div class="profile-tags">
                                        <span class="tag qr">点击放大</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contact 3 -->
                    <div id="contact-newbie" class="profile-rectangle">
                        <div class="profile-header">
                            <div class="profile-avatar">
                                <img src="./downloads/profile/ws.jpeg" alt="Staff 3" class="clickable-avatar" data-qr="./downloads/profile/unknownQR.jpeg">
                            </div>
                            <div class="profile-title">
                                <h3>呆呆</h3>
                                <div class="profile-tags">
                                    <span class="tag newbie">新人福利</span>
                                    <span class="tag sendZhanLi">战力凭证</span>
                                    <span class="tag huoDong">活动策划</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">微信</span>
                                <span class="detail-value">群里查找</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">QQ</span>
                                <span class="detail-value">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Contact 4 -->
                    <div class="profile-rectangle">
                        <div class="profile-header">
                            <div class="profile-avatar">
                                <img src="./downloads/profile/baiqian.jpeg" alt="Staff 4" class="clickable-avatar" data-qr="./downloads/profile/unknownQR.jpeg">
                            </div>
                            <div class="profile-title">
                                <h3>白浅</h3>
                                <div class="profile-tags">
                                    <span class="tag newbie">新人福利</span>
                                    <span class="tag sendZhanLi">战力凭证</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">微信</span>
                                <span class="detail-value">群里查找</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">QQ</span>
                                <span class="detail-value">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Contact 5 -->
                    <div class="profile-rectangle">
                        <div class="profile-header">
                            <div class="profile-avatar">
                                <img src="./downloads/profile/lafeier.jpeg" alt="Staff 5" class="clickable-avatar" data-qr="./downloads/profile/unknownQR.jpeg">
                            </div>
                            <div class="profile-title">
                                <h3>拉斐尔</h3>
                                <div class="profile-tags">
                                    <span class="tag sendNewbieCard">领新手金卡</span>
                                    <span class="tag sendZhanLi">战力凭证</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">微信</span>
                                <span class="detail-value">群里查找</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">QQ</span>
                                <span class="detail-value">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Contact 6 -->
                    <div class="profile-rectangle">
                        <div class="profile-header">
                            <div class="profile-avatar">
                                <img src="./downloads/profile/wawa.jpeg" alt="Staff 6" class="clickable-avatar" data-qr="./downloads/profile/unknownQR.jpeg">
                            </div>
                            <div class="profile-title">
                                <h3>蛙蛙</h3>
                                <div class="profile-tags">
                                    <span class="tag shiTu">师徒管理</span>
                                    <span class="tag">拜师找他</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">微信</span>
                                <span class="detail-value">群里查找</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">QQ</span>
                                <span class="detail-value">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Contact 7 -->
                    <div class="profile-rectangle">
                        <div class="profile-header">
                            <div class="profile-avatar">
                                <img src="./downloads/profile/kaixinbingdu.jpeg" alt="Staff 7" class="clickable-avatar" data-qr="./downloads/profile/unknownQR.jpeg">
                            </div>
                            <div class="profile-title">
                                <h3>开心病毒</h3>
                                <div class="profile-tags">
                                    <span class="tag tuiGuang">推广管理</span>
                                    <span class="tag">婷婷的老公</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">微信</span>
                                <span class="detail-value">群里查找</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">QQ</span>
                                <span class="detail-value">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Contact 8 -->
                    <div class="profile-rectangle">
                        <div class="profile-header">
                            <div class="profile-avatar">
                                <img src="./downloads/profile/zhaoPingZhong.jpeg" alt="Staff 8" class="clickable-avatar" data-qr="./downloads/profile/unknownQR.jpeg">
                            </div>
                            <div class="profile-title">
                                <h3>有意者找服主</h3>
                                <div class="profile-tags">
                                    <span class="tag prize">抽奖管理</span>
                                    <span class="tag">奖励派送</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">微信</span>
                                <span class="detail-value">群里查找</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">QQ</span>
                                <span class="detail-value">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="zhanlipinzheng" class="tab-content">
            <div class="section">
                <h2>战力凭证</h2>
                <div id="feedback-section">
                    <div id="auth-message"></div>
                    <div id="feedback-form" style="display: none;">
                        <textarea id="feedback-content" rows="4" placeholder="请输入您的反馈..." style="width: 100%; margin-bottom: 10px;"></textarea>
                        <button id="submit-feedback" class="button">提交反馈</button>
                    </div>
                    <button id="sign-in-button" class="button" style="display: none;">点击登录以提交反馈</button>
                    <div id="feedback-list" style="margin-top: 20px;">
                    </div>
                </div>
                <div class="message-form">
                    <form id="messageForm">
                        <div class="form-group">
                            <label for="username">游戏昵称: <span class="required-asterisk">*</span></label>
                            <input type="text" id="username" name="username" maxlength="20" required
                                   oninput="this.value = this.value.slice(0, 20)"
                                   title="游戏昵称不能超过20个字符">
                        </div>
                        <br>
                        <div class="form-group">
                            <label for="imageUpload1">上传战力截图 (可选): <span class="required-asterisk">*</span></label>
                            <input type="file" id="imageUpload1" name="imageUpload1" accept="image/*">
                            <div id="fileError1" class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="imageUpload2">上传任务截图 (可选): <span class="required-asterisk">*</span></label>
                            <input type="file" id="imageUpload2" name="imageUpload2" accept="image/*">
                            <div id="fileError2" class="error-message"></div>
                        </div>
                        <button type="submit">提交</button>
                    </form>
                </div>
                <div class="messages-container">
                    <div id="messagesList"></div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <footer>
        &copy; 2025 烟雨弹弹堂新人社区 · 快乐游戏每一天 🎯<br>
        页面由 <strong>开心病毒</strong> 随心制作
    </footer>

    <!-- Image Modal -->
    <div id="imageModal" class="modal">
        <span class="close-modal">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

    <!-- Supabase Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Your Supabase configuration -->
    <script src="config.js"></script>
    
    <script>
        // Function to show contact tab and scroll to newbie section
        function showNewbieContact() {
            showTab('contact');
            document.getElementById('contact-newbie').scrollIntoView({behavior: 'smooth'});
        }

        // Tab switching function
        function showTab(tabId) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');
            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Image modal functionality
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const closeBtn = document.querySelector('.close-modal');
        
        // Add click handlers for group images
        document.querySelectorAll('.tag').forEach(tag => {
            tag.addEventListener('click', function(e) {
                e.stopPropagation();
                const groupContainer = this.closest('.contact-group');
                if (groupContainer) {
                    const img = groupContainer.querySelector('img');
                    if (img) {
                        showImageInModal(img.src, img.alt);
                    }
                }
            });
        });
        
        // Make message images clickable
        document.addEventListener('click', function(e) {
            const img = e.target.closest('.clickable-image');
            if (img) {
                const imgSrc = img.getAttribute('data-src') || img.src;
                showImageInModal(imgSrc, img.alt || 'Message image');
            }
        });
        
        // Make group images clickable as well
        document.querySelectorAll('.contact-group img').forEach(img => {
            img.style.cursor = 'pointer';
            img.addEventListener('click', function() {
                showImageInModal(this.src, this.alt);
            });
        });

        // Function to show modal with smooth transition
        function showModal() {
            modal.style.display = 'flex';
            // Trigger reflow
            void modal.offsetWidth;
            modal.classList.add('show');
            // Prevent body scroll when modal is open
            document.body.style.overflow = 'hidden';
        }

        // Function to hide modal with smooth transition
        function hideModal() {
            modal.classList.remove('show');
            // Wait for transition to complete before hiding
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }, 300);
        }


        // Function to handle image display in modal
        function showImageInModal(imgSrc, altText = '') {
            modalImg.src = imgSrc;
            modalImg.alt = altText;
            showModal();
        }

        // Make scan QR text clickable
        const scanQrElements = document.querySelectorAll('.scan-qr');
        scanQrElements.forEach(element => {
            element.addEventListener('click', function() {
                const imgSrc = this.getAttribute('data-img');
                if (imgSrc) {
                    showImageInModal(imgSrc, 'Scan QR Code');
                }
            });
        });

        // Make profile avatars clickable to show WeChat QR
        const profileAvatars = document.querySelectorAll('.clickable-avatar');
        profileAvatars.forEach(avatar => {
            avatar.style.cursor = 'pointer';
            avatar.addEventListener('click', function() {
                const qrSrc = this.getAttribute('data-qr');
                if (qrSrc) {
                    showImageInModal(qrSrc, 'WeChat QR Code');
                }
            });
        });

        // Get all group images and add click event
        const groupImages = document.querySelectorAll('.profile-avatar img[src*="wcGroup"], .profile-avatar img[src*="qqGroup"], a[href*="scriptHelper2.jpeg"], a[href*="systemLanguage.jpeg"], a[href*="clearCache.jpeg"]');
        groupImages.forEach(img => {
            img.style.cursor = 'pointer';
            img.addEventListener('click', function(e) {
                e.preventDefault();
                const imgSrc = this.getAttribute('src') || this.getAttribute('href');
                showImageInModal(imgSrc, this.alt);
            });
        });

        // Add click event for WeChat ID
        const wechatId = document.querySelector('.wechat-id');
        if (wechatId) {
            wechatId.addEventListener('click', function() {
                const imgSrc = this.getAttribute('data-img');
                if (imgSrc) {
                    showImageInModal(imgSrc, 'WeChat QR Code');
                }
            });
        }

        // Close modal when clicking the close button
        closeBtn.addEventListener('click', hideModal);

        // Close modal when clicking outside the image or pressing Escape key
        modal.addEventListener('click', function(event) {
            if (event.target === modal) {
                hideModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && modal.classList.contains('show')) {
                hideModal();
            }
        });
    </script>

</body>

</html>
